# The following are the files and lines within files that need to be changed to make a custom map size load in CK3
# Author: Emperor Penguin

# width and height are the new widths and height you are setting for your mod


########################################### Game will load with just these changed ###########################
common/defines/00_defines.txt
	WORLD_EXTENTS_X # Should be: map width - 1 
	WORLD_EXTENTS_Z # Shoud be: map height - 1 

/map_data/heightmap.png     # Size should be: (width x height)  Ensure that this is in RGB format and not RGBA. If you get a white fog it might be because the heightmap was exported as RGBA. To fix this, you need to delete the alpha layer
/map_data/provinces.png     # Size should be: (width x height)  # Note, game will load even if the dimensions on this are wrong
/map_data/rivers.png     # Size should be: (width x height) 
/map_data/indirection_heightmap.png     # Size should be: (width x height) * 1/32 
##############################################################################################################
common/defines/graphics/00_graphics.txt
	PANNING_WIDTH # However far you want the player to be able to pan left to right. Panning to the edge would mean this is equal to map width
	PANNING_HEIGHT # However far you want the player to be able to pan up and down. Panning to the edge would mean this is equal to map height


/gfx/map/surround_map/surround_mask.dds     # Size should be: (width x height) * 1/2 
/gfx/map/surround_map/surround_fade.dds     # Size should be: (width x height) * 1/8 
	
/gfx/map/terrain/     # All files in this that have _mask (64 as of 1.2) or .tga (2 as of 1.3) in the name need to be resized TO: (width x height) 
	flatmap.dds     # Size should be: (width x height) 
	colormap.dds     # Size should be: (width x height) * 1/4
	detail_intensity.tga     # Size should be: (width x height) 
	detail_index.tga     # Size should be: (width x height) 
	..._mask.png     # Size should be: (width x height) 
	
	

/gfx/map/water/flowmap.dds     # Size should be: (width x height) * 1/4 
/gfx/map/water/foam_map.dds     # Size should be: (width x height) * 1/8 
/gfx/map/water/watercolor_rgb_waterspec_a.dds     # Size should be: (width x height) * 1/2 



/map_data/heightmap.heightmap
	original_heightmap_size # Should be { width height } 

/content_source/map_objects/masks     # All files in this that have _mask (21 as of 1.0) need to be resized TO: (width x height) * 1/2 


# How to import the heightmap
If you are struggling to get the custom heightmap to load or repack (this can be especially problematic with larger heightmaps) try the following procedure. This works as of 1.1.3:
1) Copy the vanilla indirection_heightmap.png and packed_heightmap.png over to the mod's map_data directory
2) Delete indirection_heightmap.png and packed_heightmap.png in the vanilla folder
3) Load the map editor and repack the map. The repacked map files should be in the vanilla map_data directory
4) Copy the new indirection_heightmap.png and packed_heightmap.png from the vanilla directory to the mod's map_data directory
5) For Steam users, verify the integrity of the game cache to redownload the vanilla indirection_heightmap.png and packed_heightmap.png files